{"version":3,"sources":["articles/routes.cljs"],"mappings":";AAOA,GAAA,QAAAA,qCAAAC,4CAAAC;AAAA;AAAA,AAAA,yBAAA,iBAAAC,6BAAA,AAAAC,6CAAA,pHAAUS;IAAVR,6BAAA,AAAAD,6CAAA;IAAAE,6BAAA,AAAAF,6CAAA;IAAAG,iCAAA,AAAAH,6CAAA;IAAAI,0BAAA,AAAAC,4CAAA,mCAAA,gEAAA,iBAAAC,eAAA;AAAA,AAAA,QAAAA,6CAAAA,+CAAAA;;AAAA,AAAA,YAAAC,kBAAA,AAAAC,+CAAA,kBAAA,6BAAA,4DAAAJ,wBAAAL,2BAAAE,2BAAAC,2BAAAC,xLAAiBO;;;AACjB,AAAAD,mEAAA,4DAAA;AAAA,AAAA,0FAAA,mDAAA;;AAEA,AAAKE,yBACH,6CAAA,mFAAA,IAAA,2CAAA,GAAA,yEAAA,QAAA,uDAAA,WAAA,gDAAA,GAAA,yEAAA,UAAA,yEAAA,mFAAA,IAAA,kDAAA,gBAAA,qEAAA,mFAAA,IAAA,kDAAA,gBAAA,34BAACX;AAQH,wBAAA,xBAAMY,wDACHC;AADH,AAEE,6BAAA,AAAAC,tBAACC,sCAAkBJ,wBAAOE;;AAG5B,AAAA,0BAAA,kCAAAG,5DAAMM;AAAN,AAAA,IAAAL,qBAAA;AAAA,AAAA,IAAAC,0BAAA,AAAA;AAAA,AAAA,IAAAC,wBAAA;;AAAA,AAAA,GAAA,CAAAA,wBAAAD;AAAA,AAAA,AAAAD,wBAAA,CAAA,UAAAE;;AAAA,eAAA,CAAAA,wBAAA;;;;AAAA;;;;AAAA,IAAAC,uBAAA,EAAA,CAAA,MAAA,AAAAH,4BAAA,AAAA,KAAAI,qBAAA,AAAAJ,yBAAA,KAAA,IAAA,OAAA;AAAA,AAAA,OAAAK,6DAAAF;;;AAAA,AAAA,CAAA,+DAAA,/DAAME,0EACDI;AADL,AAEE,OAACC,8CAAMC,mBAAc,6CAAA,mFAAA,AAAAd,hIAACe,gJAAOlB,gCAAQe;;;AAFvC,CAAA,kDAAA,lDAAMJ;;AAAN;AAAA,CAAA,4CAAA,WAAAC,vDAAMD;AAAN,AAAA,IAAAE,qBAAA;AAAA,AAAA,OAAAA,wDAAA,AAAAC,cAAAF;;;AAAA,AAIA,2BAAA,3BAAMO,8DACHC;AADH,AAEE,IAAMC,QAAM,AAACC,gDAAQ,iHAAA,hHAAK,AAACC,eAAK,AAAA,yFAAUH;AAA1C,AACE,8BAAA,mFAAA,4FAAA,2CAAA,4DAAA,7SAACI,uSAA8CJ,6DAAaC;;AAEhE,GAAA,QAAApC,qCAAAC,4CAAAuC;AAAA;AAAA,AAAA,AAASC,0BACP,AAACC,iBAAYR,yBAASlB;;AAExB,iCAAA,jCAAM2B,0EACHC;AADH,AAEE,OAAkBH,yEAAQ,AAACV,8CAAML,wBAAQkB;;AAE3C,8BAAA,9BAAMC;AAAN,AAEE,OAAcJ;;AAEhB,qBAAA,rBAACK,iFAEA,WAAKF;AAAL,AACE,OAACD,+BAAUC","names":["js/articles","js/articles.routes","js/articles.routes.panels","method-table__4712__auto__","cljs.core.atom","prefer-table__4713__auto__","method-cache__4714__auto__","cached-hierarchy__4715__auto__","hierarchy__4716__auto__","cljs.core.get","fexpr__35510","cljs.core/MultiFn","cljs.core.symbol","articles.routes/panels","cljs.core/identity","articles.routes/routes","articles.routes/parse","url","cljs.core/deref","bidi.bidi/match-route","var_args","args__4835__auto__","len__4829__auto__","i__4830__auto__","argseq__4836__auto__","cljs.core/IndexedSeq","articles.routes/url-for","seq35511","self__4817__auto__","cljs.core/seq","args","cljs.core.apply","bidi.bidi/path-for","cljs.core.into","articles.routes/dispatch","route","panel","cljs.core.keyword","cljs.core/name","re-frame.core/dispatch","js/articles.routes.history","articles.routes/history","pushy.core/pushy","articles.routes/navigate!","handler","articles.routes/start!","re-frame.core/reg-fx"],"sourcesContent":["(ns articles.routes\n  (:require\n   [bidi.bidi :as bidi]\n   [pushy.core :as pushy]\n   [re-frame.core :as re-frame]\n   [articles.events :as events]))\n\n(defmulti panels identity)\n(defmethod panels :default [] [:div \"No panel found for this route.\"])\n\n(def routes\n  (atom\n   [\"/\" {\"\"      :articles-index\n         \"about\" :about\n         \"articles\" {\"\" :articles-index\n                     \"/create\" :create-article\n                     [\"/\" :id \"/edit\"]  :edit-article\n                     [\"/\" :id \"/view\"]  :view-article}}]))\n\n(defn parse\n  [url]\n  (bidi/match-route @routes url))\n\n\n(defn url-for\n  [& args]\n  (apply bidi/path-for (into [@routes] args)))\n\n(defn dispatch\n  [route]\n  (let [panel (keyword (str (name (:handler route)) \"-panel\"))]\n    (re-frame/dispatch [::events/set-route {:route route :panel panel}])))\n\n(defonce history\n  (pushy/pushy dispatch parse))\n\n(defn navigate!\n  [handler]\n  (pushy/set-token! history (apply url-for handler)))\n\n(defn start!\n  []\n  (pushy/start! history))\n\n(re-frame/reg-fx\n :navigate\n (fn [handler]\n   (navigate! handler)))\n"]}