{"version":3,"sources":["articles/articles_form/views.cljs"],"mappings":";AASA,6CAAA,7CAAMA;AAAN,AACE,IAAAC,qBAAA,AAAAC,gBAAsB,sDAAA,mFAAA,wFAAA,jOAACE;AAAvB,AAAA,oBAAAH;AAAA,AAAA,gBAAAA,ZAAWE;AAAX,AAAA,0FAAA,mDAAA,2CAAA,oDACcA;;AADd;;;AAIF,wCAAA,xCAAME;AAAN,AACE,WAAA,AAAAH,PAAMI,uBAAM,sDAAA,mFAAA,zIAACF;AAAb,AAAA,0FAAA,6DAEG,AAACG,4CAAI,WAAKC;AAAL,AAAA,0FAAA,6FAAA,2CAAA,oEAAA,mFAAA,wFAAA,2CAAA,6DAAA,nSACmCA,YAAKA;AADxC,AAEwC,8BAAA,mFAAA,1GAACC,oPAA+CD;;GAAUF;;AAE5G,6CAAA,7CAAMI;AAAN,AAAA,0FAAA,mDAAA,mFAAA,uDAAA,eAAA,mFAAA,mEAAA,mFAAA,2LAAA,mFAAA,0JAAA,2CAAA,6DAAA,pbAKK,+BAAA,oDAAA,nFAACC;AALN,AAOiB,8BAAA,mFAAA,1GAACF;WAPlB;;AAUA,4CAAA,5CAAMG;AAAN,AACE,cAAA,AAAAV,VAAMW,0BAAS,sDAAA,mFAAA,zIAACT;wBAAhB,AAAAF,pBACMY,oCAAa,sDAAA,mFAAA,4GAAA,mFAAA,sDAAA,0DAAA,gEAAA,sDAAA,yDAAA,vmBAACV;IACdW,QAAM,2BAAA,iBAAA,1BAAIF;AAFhB,AAAA,0FAAA,mDAAA,mFAAA,4EAAA,mFAAA,yDAAA,mFAAA,mEAAA,oFAAA,s0BAAA,mFAAA,uGAAA,2CAAA,+FAAA,6DAAA,3kDAIcE,qdAIT,+BAAA,sDAAA,rFAACJ,8FACD,+BAAA,0DAAA,zFAACA,oGACD,+BAAA,gEAAA,/FAACA,4GACD,AAACX,6CACD,8BAAA,sDAAA,pFAACgB,4FACD,iCAAA,yDAAA,SAAA,mFAAA,oBAAA,QAAA,lNAACC,yOACD,AAACP,6CACD,AAACL,2UAC0C,AAACa,cAAIJ;AAhBrD,AAiBiD,8BAAA,mFAAA,1GAACL,wOAAyCI;WAAW,2BAAA,SAAA,lBAAIA;;AAE5G,oDAAA,pDAAMM;AAAN,AACE,uBAAA,mFAAA,1GAACV;;AADH,0FAEGG;;AAGH,AAAAQ,mEAAA,qFAAA;AAAA,AAAA,0FAAmDD;;AAGnD,kDAAA,lDAAME,4GAAoBC;AAA1B,AACE,uBAAA,mFAAA,1GAACb,8OAA4C,AAAA,gFAAKa;;AADpD,0FAEGV;;AAIH,AAAAQ,mEAAA,iFAAA,WAA8CG,EAAED;AAAhD,AAAA,0FAA+DD,gDAAmBC","names":["articles.articles-form.views/image-display","temp__5753__auto__","cljs.core/deref","image-url","re_frame.core.subscribe","articles.articles-form.views/tag-list","tags","cljs.core.map","tag","re-frame.core/dispatch","articles.articles-form.views/add-tag-input","articles.form.views/text-input","articles.articles-form.views/article-form","edit-id","form-valid?","title","articles.form.views/text-area","articles.form.views/select-input","cljs.core/not","articles.articles-form.views/create-article-panel","articles.routes/panels","articles.articles-form.views/edit-article-panel","route-params","_"],"sourcesContent":["(ns articles.articles-form.views\n  (:require [articles.routes :as routes]\n            [re-frame.core :as re-frame]\n            [articles.articles-form.events :as events]\n            [articles.articles-form.subs :as subs]\n            [articles.form.views :refer [text-input text-area select-input]]\n            [articles.form.subs :as form-subs]))\n\n\n(defn image-display []\n  (when-let [image-url @(re-frame/subscribe [::form-subs/form :image-url])]\n    [:img {:src image-url}]))\n\n\n(defn tag-list []\n  (let [tags @(re-frame/subscribe [::subs/tag-list])]\n    [:div.mt-2\n     (map (fn [tag]\n            [:span.tag.is-success.mr-2 {:key tag} tag\n             [:button.delete.is-small {:on-click #(re-frame/dispatch [::events/remove-article-tag tag])}]]) tags)]))\n\n(defn add-tag-input []\n  [:div\n   [:label \"Tags\"]\n   [:div.columns\n    [:div.column.is-one-third\n     (text-input :tag \"\")]\n    [:div.column.is-narrow.is-align-self-center.is-clickable\n     {:on-click #(re-frame/dispatch [::events/save-article-tag])}\n     \"\u2795\"]]])\n\n(defn article-form []\n  (let [edit-id @(re-frame/subscribe [::subs/edit-id])\n        form-valid? @(re-frame/subscribe [::form-subs/form-is-valid? [:title :excerpt :image-url :body :author :tags]])\n        title (if edit-id \"Update Article\" \"Create Article\")]\n    [:div\n     [:h1.title title]\n     [:hr]\n     [:div.columns\n      [:div.column.is-half\n       (text-input :title \"Title\")\n       (text-input :excerpt \"Excerpt\")\n       (text-input :image-url \"Image url\")\n       (image-display)\n       (text-area :body \"Body\")\n       (select-input :author \"Author\" [\"On the code again\" \"Allan\" \"Jeremy Mags\"])\n       (add-tag-input)\n       (tag-list)\n       [:button.button.is-primary.mt-4 {:disabled (not form-valid?)\n                                        :on-click #(re-frame/dispatch [::events/save-article edit-id])} (if edit-id \"Update\" \"Save\")]]]]))\n\n(defn create-article-panel []\n  (re-frame/dispatch [::events/initialise-create])\n  [article-form])\n\n\n(defmethod routes/panels :create-article-panel [] [create-article-panel])\n\n\n(defn edit-article-panel [route-params]\n  (re-frame/dispatch [::events/initialise-edit (:id route-params)])\n  [article-form])\n\n\n\n(defmethod routes/panels :edit-article-panel [_ route-params] [edit-article-panel route-params])\n\n\n\n"]}