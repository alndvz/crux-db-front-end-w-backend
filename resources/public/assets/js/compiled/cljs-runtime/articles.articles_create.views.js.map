{"version":3,"sources":["articles/articles_create/views.cljs"],"mappings":";AASA,+CAAA,/CAAMA;AAAN,AACE,IAAAC,qBAAA,AAAAC,gBAAsB,sDAAA,mFAAA,wFAAA,jOAACE;AAAvB,AAAA,oBAAAH;AAAA,AAAA,gBAAAA,ZAAWE;AAAX,AAAA,0FAAA,mDAAA,2CAAA,oDACcA;;AADd;;;AAIF,0CAAA,1CAAME;AAAN,AACE,WAAA,AAAAH,PAAMI,uBAAM,sDAAA,mFAAA,zIAACF;AAAb,AAAA,0FAAA,6DAEG,AAACG,4CAAI,WAAKC;AAAL,AAAA,0FAAA,gGAAA,2CAAA,oEAAA,mFAAA,wFAAA,2CAAA,6DAAA,nSACoCA,YAAKA;AADzC,AAEwC,8BAAA,mFAAA,1GAACC,wPAA+CD;;GAAUF;;AAE5G,+CAAA,/CAAMI;AAAN,AAAA,0FAAA,mDAAA,mFAAA,uDAAA,eAAA,mFAAA,mEAAA,mFAAA,2LAAA,mFAAA,0JAAA,2CAAA,6DAAA,pbAKK,+BAAA,oDAAA,nFAACC;AALN,AAOiB,8BAAA,mFAAA,1GAACF;WAPlB;;AAYA,8CAAA,9CAAMG;AAAN,AACE,cAAA,AAAAV,VAAMW,0BAAS,sDAAA,mFAAA,zIAACT;wBAAhB,AAAAF,pBACMY,oCAAa,sDAAA,mFAAA,4GAAA,mFAAA,sDAAA,0DAAA,gEAAA,sDAAA,yDAAA,vmBAACV;AADpB,AAAA,0FAAA,mDAAA,mFAAA,8DAAA,4BAAA,mFAAA,yDAAA,mFAAA,mEAAA,oFAAA,40BAAA,mFAAA,uGAAA,2CAAA,+FAAA,6DAAA,5nCAOK,+BAAA,sDAAA,rFAACO,8FACD,+BAAA,0DAAA,zFAACA,oGACD,+BAAA,gEAAA,/FAACA,4GACD,AAACX,+CACD,8BAAA,sDAAA,pFAACe,4FACD,iCAAA,yDAAA,SAAA,mFAAA,oBAAA,QAAA,lNAACC,yOACD,AAACN,+CACD,AAACL,6UAC0C,AAACY,cAAIH;AAfrD,AAgBiD,8BAAA,mFAAA,1GAACL,2OAAyCI;WAAW,2BAAA,SAAA,lBAAIA;;AAE5G,sDAAA,tDAAMK;AAAN,AACE,uBAAA,mFAAA,1GAACT;;AADH,0FAEGG;;AAGH,AAAAO,mEAAA,qFAAA;AAAA,AAAA,0FAAmDD;;AAGnD,oDAAA,pDAAME,gHAAoBC;AAA1B,AACE,uBAAA,mFAAA,1GAACZ,iPAA4C,AAAA,gFAAKY;;AADpD,0FAEGT;;AAIH,AAAAO,mEAAA,iFAAA,WAA8CG,EAAED;AAAhD,AAAA,0FAA+DD,kDAAmBC","names":["articles.articles-create.views/image-display","temp__5753__auto__","cljs.core/deref","image-url","re_frame.core.subscribe","articles.articles-create.views/tag-list","tags","cljs.core.map","tag","re-frame.core/dispatch","articles.articles-create.views/add-tag-input","articles.form.views/text-input","articles.articles-create.views/article-form","edit-id","form-valid?","articles.form.views/text-area","articles.form.views/select-input","cljs.core/not","articles.articles-create.views/create-article-panel","articles.routes/panels","articles.articles-create.views/edit-article-panel","route-params","_"],"sourcesContent":["(ns articles.articles-create.views\n  (:require [articles.routes :as routes]\n            [re-frame.core :as re-frame]\n            [articles.articles-create.events :as events]\n            [articles.articles-create.subs :as subs]\n            [articles.form.views :refer [text-input text-area select-input]]\n            [articles.form.subs :as form-subs]))\n\n\n(defn image-display []\n  (when-let [image-url @(re-frame/subscribe [::form-subs/form :image-url])]\n    [:img {:src image-url}]))\n\n\n(defn tag-list []\n  (let [tags @(re-frame/subscribe [::subs/tag-list])]\n    [:div.mt-2\n     (map (fn [tag]\n            [:span..tag.is-success.mr-2 {:key tag} tag\n             [:button.delete.is-small {:on-click #(re-frame/dispatch [::events/remove-article-tag tag])}]]) tags)]))\n\n(defn add-tag-input []\n  [:div\n   [:label \"Tags\"]\n   [:div.columns\n    [:div.column.is-one-third\n     (text-input :tag \"\")]\n    [:div.column.is-narrow.is-align-self-center.is-clickable\n     {:on-click #(re-frame/dispatch [::events/save-article-tag])}\n     \"\u2795\"]]])\n\n\n\n(defn article-form []\n  (let [edit-id @(re-frame/subscribe [::subs/edit-id])\n        form-valid? @(re-frame/subscribe [::form-subs/form-is-valid? [:title :excerpt :image-url :body :author :tags]])]\n    [:div\n     [:h1.title \"Create an article\"]\n     [:hr]\n     [:div.columns\n      [:div.column.is-half\n       (text-input :title \"Title\")\n       (text-input :excerpt \"Excerpt\")\n       (text-input :image-url \"Image url\")\n       (image-display)\n       (text-area :body \"Body\")\n       (select-input :author \"Author\" [\"On the code again\" \"Allan\" \"Jeremy Mags\"])\n       (add-tag-input)\n       (tag-list)\n       [:button.button.is-primary.mt-4 {:disabled (not form-valid?)\n                                        :on-click #(re-frame/dispatch [::events/save-article edit-id])} (if edit-id \"Update\" \"Save\")]]]]))\n\n(defn create-article-panel []\n  (re-frame/dispatch [::events/initialise-create])\n  [article-form])\n\n\n(defmethod routes/panels :create-article-panel [] [create-article-panel])\n\n\n(defn edit-article-panel [route-params]\n  (re-frame/dispatch [::events/initialise-edit (:id route-params)])\n  [article-form])\n\n\n\n(defmethod routes/panels :edit-article-panel [_ route-params] [edit-article-panel route-params])\n\n\n\n"]}